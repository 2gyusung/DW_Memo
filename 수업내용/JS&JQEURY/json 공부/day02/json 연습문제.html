<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON</title>
</head>
<body>
    <div class="container">
    </div>
<script
    src="https://code.jquery.com/jquery-3.6.0.min.js"
    integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
    crossorigin="anonymous"></script>
<!-- 소스 구현 -->
<script>
    /* 
    no : 데이터 고유 번호
    driver : 운전자
    car : 탑승 차량
    mileage : 주행 거리
    createAt : 운행시작 날짜
    endAt : 운행종료 날짜
    */
    var carData = [
        {
            no : 1,
            driver : '박재범',
            car : 'K5',
            mileage : '30',
            createAt : '2022-03-24 09:30:21',
            endAt : '2022-03-24 10:30:55'
        },
        {
            no : 2,
            driver : '김종국',
            car : 'K5',
            mileage : '10',
            createAt : '2022-03-24 10:55:12',
            endAt : '2022-03-24 11:10:12'
        },
        {
            no : 3,
            driver : '박재범',
            car : 'K5',
            mileage : '5',
            createAt : '2022-03-24 11:20:00',
            endAt : '2022-03-24 11:30:12'
        },
        {
            no : 4,
            driver : '김종국',
            car : 'K5',
            mileage : '17',
            createAt : '2022-03-24 12:00:30',
            endAt : '2022-03-24 12:50:00'
        }
    ];
    // 전체 출력
    console.log(carData);

    //문제 1. 운전자가 김종국인 차량 주행거리 총합을 구하시오.

    // 첫번째 방법
    var num = 0;
    for(var i = 0; i<carData.length; i++) {
        if(carData[i].driver === '김종국') {
                       // string에서 int형으로
            var mile = parseInt(carData[i].mileage)
        num += mile;
    }
}
console.log(num);

// 두번째 방법
// 배열 원소 값
var sum = 0;
carData.forEach(function(e) {
    console.log(e.car);
    if(e.driver === '김종국') {
    sum +=Number(e.mileage);//문자에서 숫자로 변환
    }
});


    //문제 2. 운전자가 박재범인 차량의 json데이터 수는?
    //첫번째 방법
 var num1 = 0;
 for(var i = 0; i<carData.length; i++) {
     if(carData[i].driver === '박재범') {
         num1 ++;
     }
    }
    console.log(num1);
    // 2번째 방법 
//  입력 못함

    //문제 3. 자동차가 K5인 차량의 주행거리 총합을 구하시오.
    var num2 = 0;
    for(var i = 0; i<carData.length; i++) {
        if(carData[i].car === 'K5') {
                    // string에서 int형으로
            var kia = parseInt(carData[i].mileage)
            num2 += kia;
        }
    }
    console.log(num2);

    //문제 4. 운전자가 김종국인 차량의 운행시작과 운행종료를 모두 출력하시오.
    var num3 = 0;
    for(var i = 0; i<carData.length; i++) {
        if(carData[i].driver === '김종국') {
          console.log(carData[i].createAt)
          console.log(carData[i].endAt)
        }
        
    }
        //json값을 html로 표현하는 방법
        $('.container').append(carData[0].driver);
    
    
        // 날짜 계산 하는 방법
    var start = carData[0].createAt;
    var end = carData[0].endAt;
    
    // 첫번째. 문자를 날짜 형식으로 변경!
    // 출발 날짜
    start =  new Date(start);
    console.log(start);
    // 종료 날짜
    end = new Date(end);
    console.log(end);

        // 두번째. 날짜를 초 단위로 변경!
        // 1초 === 1000ms , 1분 === 60초
        console.log(start.getTime());   //1970년 1월 1일 자정기준 부터 시작 getTime이 millisecond시간으로 계산
        console.log(end.getTime());     //1970년 1월 1일 자정기준 부터 시작 millisecond

        //세번째. 초
        var diffSeconds = (end.getTime() - start.getTime()) / (1000);
    console.log(diffSeconds);

        // 연습 문제 분
      var diffMinute = (end.getTime() - start.getTime()) / (1000 * 60);
    console.log(diffMinute);

        // 연습 문제 시간
        var diffHour = (end.getTime() - start.getTime()) / (1000 * 60 * 60);
    console.log(diffHour);

        
        

</script>
</body>
</html>